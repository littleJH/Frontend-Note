# 原型模式

### 设计模式与编程范式

设计模式：

- 针对特定问题的解决方案
- 主要在面向对象编程中使用，帮助开发者解决类和对象之间的关系问题

编程范式

- 定义编写和组织代码的整体方法和风格
- 影响整个程序的结构和编写方式
- 是编程语言的基础

常见设计模式：单例模式、工厂模式、装饰器模式

常见编程范式：面向对象编程、过程式编程、函数式编程、事件驱动编程

JavaScript 的根本就是原型模式，平时不会刻意去使用原型模式，因此将其作为编程范式更加合理

在 JavaScript 中，原型模式的体现就是**基于原型链的继承**

理解的关键：**原型、原型链！**

### 原型

**`prorotype` 与 `__proto__`**

- 每个构造函数都有一个 `prototype` 属性，指向构造函数的原型对象
- 原型对象的 `constructor` 属性指向该构造函数
- 当使用 `new` 关键字创建实例后，实例会有一个 `__proto__` 属性，指向该构造函数的原型对象

```jsx
function Dog (name, age) {
	this.name = name
	this.age = age
}

Dog.prototype.eat = function () {
	console.log('dog eatting')
}

const dog = new Dog('dahuang', 3)

dog.eat()    // dog eatting
dog.toString()  // [object object]
```

![Untitled](%E5%8E%9F%E5%9E%8B%E6%A8%A1%E5%BC%8F%20f27e36572538421f8b364b8b193b205d/Untitled.png)

![Untitled](%E5%8E%9F%E5%9E%8B%E6%A8%A1%E5%BC%8F%20f27e36572538421f8b364b8b193b205d/Untitled%201.png)

### 原型链

- 当访问一个 JavaScript 实例的属性/方法时，首先搜索这个实例本身
- 实例没有时，会搜索实例的原型对象，原型对象的原型对象、
- 直到搜索到位于原型链顶端的 `Object` , `Object` 的原型为 `null`

### `Object.create(prototypeObj)`

以指定对象 `prototypeObj` 作为原型创建对象，实现继承

```jsx
const prototypeObj = {
	hello: function () {
		console.log('hello world')
	}
}

const obj = Object.create(prototypeObj)

obj.hello()   // hello world
```

### 深拷贝

1. `JSON.stringify() & JSON.parse()` 
    
    无法处理 function、正则等
    
2. 递归